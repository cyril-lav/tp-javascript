<!doctype html>
<html>

<head>
</head>

<!-- Commentaire HTML -->

<body>
    <!-- Chaque page doit avoir un H1 qui est le titre principal de la page -->
    <h1>Cours de JS 2020-2021</h1>

    <section id="news">
        <h2 id="titleNews">News</h2>
        <article>
            <h3 class="title">News 1</h3>
        </article>

        <article>
            <h3 class="title">News 2</h3>
        </article>

        <article>
            <h3 class="title">News 3</h3>
        </article>
    </section>

    <form id="addNewsForm" onsubmit="return addNews();">
        Nom de la news : <input name="titleToAdd" type="text" id="nomNews" />

        <input type="submit" name="addNewsBtn" />
    </form>
</body>


<!-- Le code JS doit se trouver après la clôture de la balise body. -->
<script type="text/javascript" src="src/js/variables.js"></script>
<script>
    // Boucle de 0 à 5
    for (let i = 0; i < 5; i++) {
        console.log(i);
        if (i == 0) {
            console.log(GREEN)
        }
        else {
            console.log(i % 2 == 0 ? RED : BLUE);
        }
    }

    // Récupérer le contenu de H1 et le log
    let h1 = document.querySelector('h1');
    console.log(h1.innerHTML);

    // Récupérer le contenu de H2 #titleNews et le log
    let h2 = document.querySelector('#titleNews');
    console.log(h2.innerHTML);

    // Récupérer le contenu de toutes les balises H3 et le log
    let h3 = document.querySelectorAll('.title');
    h3.forEach(balise => console.log(balise.innerHTML));


    // Au clic sur le bouton du formulaire, récupérer le contenu du champ ...
    function addNews() {
        let article = document.getElementById('nomNews').value

        //Si doublon alors message d'erreur de couleur rouge
        if(estUnDoublon(article)){
            let message = document.createElement('p');
            message.innerHTML="Article déjà existant";
            message.style="color:" + RED;
            document.querySelector('#addNewsForm').prepend(message);
            return false;
        }
        let newArticle = document.createElement('article');
        let newTitle = document.createElement('h3');
        newTitle.className += "title";
        newTitle.innerHTML = article;
        newArticle.append(newTitle);
        document.querySelector('#news').append(newArticle);
        return false;
    }

    // Créer une fonction qui log un message un paramètre + DateTime
    function affichageMessage(message) {
        let date = new Date();
        let jour = date.getDate() + '/' + (date.getMonth() + 1) + '/' + date.getFullYear();
        let heure = date.getHours() + ':' + date.getMinutes();
        console.log('Le ' + jour + ' à ' + heure + ' ' + message);
    }

    // Vérifier si l'article existe déjà
    function estUnDoublon(article) {
        let listeArticles = document.querySelectorAll(".title");
        for(let i = 0; i < listeArticles.length; i++)
        {
            if (listeArticles[i].innerHTML.toString() == article.toString()){
                return true;
            }
        }
        return false;
    }

    affichageMessage("ceci est un test");
</script>

</html>